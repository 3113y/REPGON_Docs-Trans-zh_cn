#pragma once
#include "IsaacRepentance.h"
#include "ASMPatcher.hpp"
#include "../ASMPatches.h"

struct GridEntitySpawnPatchInfo {
	char* signature;
	char* comment;
	int sigOffset;
	GridEntityType type;
	unsigned int variant;
	ASMPatch::Registers idxReg; // register containing grid idx
	int idxOffset;
	ASMPatch::Registers seedReg; // register containing seed
	int seedOffset;
	int jumpOffset;
};

const GridEntitySpawnPatchInfo patches[1] = {
	{"8b0d????????8985????????8b81????????8985????????85f678??81fec00100007c??68????????6a03e8????????8b85????????83c40881febf0100000f87????????81bc??????????840300000f8f????????689c010000e8????????8bf083c40489b5????????8bcec745??06000000e8????????c706????????c786????????00000000c786????????00000000c786????????0f000000c686????????00c786????????00000000c786????????00000000c786????????00000000c786????????00000000a1????????8b0d????????8986????????898e????????a1????????8b0d????????8986????????898e????????8b8d????????c745??ffffffff8b85????????c786????????00000000c786????????00000000c746??0e0000008946??8b54????85d274??8b028bca6a01ff108b85????????8b8d????????ffb5????????8974????8bcec746??01000000",
	"ai_mega_fatty (red poop champion)", 0, GRID_POOP, 1, ASMPatch::Registers::ESI, 0, ASMPatch::Registers::EAX, 0, 0x166},
};

void PatchGridSpawnCallback();